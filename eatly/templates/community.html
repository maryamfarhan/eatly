<!--  Community Feed Page with Categories : Shows what people are eating organized by meal type -->

{% extends "base.html" %}

{% block title %}Community - Eatly{% endblock %}

{% block content %}

<!-- ========== COMMUNITY HEADER ========== -->
<section class="community-header">
    <div class="community-header-content">
        <h1>Community Feed</h1>
        <p>See what everyone's cooking and eating right now</p>
        <button class="btn btn-primary" id="share-meal-btn">Share Your Meal</button>
    </div>
</section>

<!-- ========== CATEGORY TABS ========== -->
<!-- Filter posts by meal type -->
<section class="category-tabs">
    <div class="tabs-container">
        <button class="tab-btn active" data-category="all">All Meals</button>
        <button class="tab-btn" data-category="breakfast">Breakfast</button>
        <button class="tab-btn" data-category="lunch">Lunch</button>
        <button class="tab-btn" data-category="dinner">Dinner</button>
        <button class="tab-btn" data-category="snacks">Snacks</button>
        <button class="tab-btn" data-category="desserts">Desserts</button>
    </div>
</section>

<!-- ========== SHARE MEAL MODAL ========== -->
<div id="share-modal" class="modal" style="display: none;">
    <div class="modal-content">
        <span class="modal-close" id="close-modal">&times;</span>
        
        <h2>Share Your Meal</h2>
        
        <form action="/community/post" method="POST" enctype="multipart/form-data">
            
            <!-- Meal Name -->
            <div class="form-group">
                <label for="meal-name">Meal Name</label>
                <input type="text" id="meal-name" name="meal_name" 
                       placeholder="What did you make?" required>
            </div>
            
            <!-- Meal Category -->
            <div class="form-group">
                <label for="category">Category</label>
                <select id="category" name="category" required>
                    <option value="">Select a category</option>
                    <option value="breakfast">Breakfast</option>
                    <option value="lunch">Lunch</option>
                    <option value="dinner">Dinner</option>
                    <option value="snacks">Snacks</option>
                    <option value="desserts">Desserts</option>
                </select>
            </div>
            
            <!-- Photo Upload -->
            <div class="form-group">
                <label for="meal-photo">Photo</label>
                <input type="file" id="meal-photo" name="photo" accept="image/*">
            </div>
            
            <!-- Caption/Recipe -->
            <div class="form-group">
                <label for="caption">Caption or Recipe</label>
                <textarea id="caption" name="caption" rows="4" 
                          placeholder="Tell us about your meal..."></textarea>
            </div>
            
            <button type="submit" class="btn btn-primary">Post to Community</button>
        </form>
    </div>
</div>

<!-- ========== COMMUNITY FEED ========== -->
<section class="community-feed">
    
    <!-- BREAKFAST POST -->
    <div class="post-card" data-category="breakfast">
        <div class="post-header">
            <div class="user-avatar">ğŸ‘¤</div>
            <div class="post-user-info">
                <h3 class="username">Oliver-Baker</h3>
                <span class="post-time">1 hour ago</span>
            </div>
        </div>
        
        <div class="post-image">
            <div class="image-placeholder">ğŸ¥</div>
        </div>
        
        <div class="post-content">
            <div class="post-category breakfast-tag">Breakfast</div>
            <h4 class="meal-name">Fluffy Buttermilk Pancakes</h4>
            <p class="post-caption">
                Perfect Sunday morning vibes! Made these with fresh blueberries 
                and maple syrup. The secret? Don't overmix the batter!
            </p>
        </div>
        
        <div class="post-actions">
            <button class="action-btn">
                <span class="icon">â¤ï¸</span>
                <span class="count">52</span>
            </button>
            <button class="action-btn">
                <span class="icon">ğŸ’¬</span>
                <span class="count">12</span>
            </button>
        </div>
    </div>
    
    <!-- LUNCH POST -->
    <div class="post-card" data-category="lunch">
        <div class="post-header">
            <div class="user-avatar">ğŸ‘¤</div>
            <div class="post-user-info">
                <h3 class="username">HealthyBowls_Nina</h3>
                <span class="post-time">3 hours ago</span>
            </div>
        </div>
        
        <div class="post-image">
            <div class="image-placeholder">ğŸ¥—</div>
        </div>
        
        <div class="post-content">
            <div class="post-category lunch-tag">Lunch</div>
            <h4 class="meal-name">Rainbow Buddha Bowl</h4>
            <p class="post-caption">
                Packed with quinoa, roasted chickpeas, avocado, and tahini dressing. 
                Perfect for meal prep - made 5 of these for the week!
            </p>
        </div>
        
        <div class="post-actions">
            <button class="action-btn">
                <span class="icon">â¤ï¸</span>
                <span class="count">38</span>
            </button>
            <button class="action-btn">
                <span class="icon">ğŸ’¬</span>
                <span class="count">7</span>
            </button>
        </div>
    </div>
    
    <!-- DINNER POST -->
    <div class="post-card" data-category="dinner">
        <div class="post-header">
            <div class="user-avatar">ğŸ‘¤</div>
            <div class="post-user-info">
                <h3 class="username">Chef-Ronaldo</h3>
                <span class="post-time">5 hours ago</span>
            </div>
        </div>
        
        <div class="post-image">
            <div class="image-placeholder">ğŸ</div>
        </div>
        
        <div class="post-content">
            <div class="post-category dinner-tag">Dinner</div>
            <h4 class="meal-name">Creamy Garlic Pasta</h4>
            <p class="post-caption">
                Simple weeknight dinner that tastes like it's from a restaurant! 
                Garlic, cream, parmesan, and fresh basil. Done in 20 minutes.
            </p>
        </div>
        
        <div class="post-actions">
            <button class="action-btn">
                <span class="icon">â¤ï¸</span>
                <span class="count">67</span>
            </button>
            <button class="action-btn">
                <span class="icon">ğŸ’¬</span>
                <span class="count">15</span>
            </button>
        </div>
    </div>
    
    <!-- SNACKS POST -->
    <div class="post-card" data-category="snacks">
        <div class="post-header">
            <div class="user-avatar">ğŸ‘¤</div>
            <div class="post-user-info">
                <h3 class="username">Maryam_ChaiLover</h3>
                <span class="post-time">8 hours ago</span>
            </div>
        </div>
        
        <div class="post-image">
            <div class="image-placeholder">ğŸ¥‘</div>
        </div>
        
        <div class="post-content">
            <div class="post-category snacks-tag">Snacks</div>
            <h4 class="meal-name">Avocado Toast Upgrade</h4>
            <p class="post-caption">
                Not your basic avocado toast! Added everything bagel seasoning, 
                chili flakes, and a perfectly runny egg. Chef's kiss! ğŸ‘Œ
            </p>
        </div>
        
        <div class="post-actions">
            <button class="action-btn">
                <span class="icon">â¤ï¸</span>
                <span class="count">29</span>
            </button>
            <button class="action-btn">
                <span class="icon">ğŸ’¬</span>
                <span class="count">4</span>
            </button>
        </div>
    </div>
    
    <!-- DESSERT POST -->
    <div class="post-card" data-category="desserts">
        <div class="post-header">
            <div class="user-avatar">ğŸ‘¤</div>
            <div class="post-user-info">
                <h3 class="username">BakingWithJasmine</h3>
                <span class="post-time">1 day ago</span>
            </div>
        </div>
        
        <div class="post-image">
            <div class="image-placeholder">ğŸ°</div>
        </div>
        
        <div class="post-content">
            <div class="post-category desserts-tag">Desserts</div>
            <h4 class="meal-name">Chocolate Lava Cake</h4>
            <p class="post-caption">
                Nailed it on the first try! That gooey center is EVERYTHING. 
                Served warm with vanilla ice cream. Recipe linked in my bio!
            </p>
        </div>
        
        <div class="post-actions">
            <button class="action-btn">
                <span class="icon">â¤ï¸</span>
                <span class="count">94</span>
            </button>
            <button class="action-btn">
                <span class="icon">ğŸ’¬</span>
                <span class="count">23</span>
            </button>
        </div>
    </div>
    
    <!-- DINNER POST 2 -->
    <div class="post-card" data-category="dinner">
        <div class="post-header">
            <div class="user-avatar">ğŸ‘¤</div>
            <div class="post-user-info">
                <h3 class="username">TacoTuesday_Jay</h3>
                <span class="post-time">1 day ago</span>
            </div>
        </div>
        
        <div class="post-image">
            <div class="image-placeholder">ğŸŒ®</div>
        </div>
        
        <div class="post-content">
            <div class="post-category dinner-tag">Dinner</div>
            <h4 class="meal-name">Street-Style Tacos</h4>
            <p class="post-caption">
                Taco Tuesday tradition! Carne asada with fresh cilantro, onions, 
                and lime. Made my own salsa verde too. Worth the effort!
            </p>
        </div>
        
        <div class="post-actions">
            <button class="action-btn">
                <span class="icon">â¤ï¸</span>
                <span class="count">81</span>
            </button>
            <button class="action-btn">
                <span class="icon">ğŸ’¬</span>
                <span class="count">19</span>
            </button>
        </div>
    </div>
    
</section>

<!-- ========== JAVASCRIPT ========== -->
<script>
// Modal functionality
const modal = document.getElementById('share-modal');
const openBtn = document.getElementById('share-meal-btn');
const closeBtn = document.getElementById('close-modal');

openBtn.addEventListener('click', () => modal.style.display = 'block');
closeBtn.addEventListener('click', () => modal.style.display = 'none');
window.addEventListener('click', (e) => {
    if (e.target === modal) modal.style.display = 'none';
});

// Category filtering
const tabBtns = document.querySelectorAll('.tab-btn');
const postCards = document.querySelectorAll('.post-card');

tabBtns.forEach(btn => {
    btn.addEventListener('click', function() {
        // Remove active class from all tabs
        tabBtns.forEach(b => b.classList.remove('active'));
        // Add active to clicked tab
        this.classList.add('active');
        
        // Get selected category
        const category = this.getAttribute('data-category');
        
        // Filter posts
        postCards.forEach(card => {
            if (category === 'all') {
                card.style.display = 'block';
            } else {
                if (card.getAttribute('data-category') === category) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            }
        });
    });
});
</script>

{% endblock %}

